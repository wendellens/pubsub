<!DOCTYPE html>
<html>
<head>
  <title>PubSub Demonstration</title>
  
  <style>
    body {
      font-family: Arial, sans-serif;
      pdding: 20px;
      background-color: #fff;
      color: #333;
    }

    h2 {
      margin-bottom: 15px;
    }

    button {
      padding: 8px;
      margin: 5px;
      border: 1px solid #ccc;
      background-color: #f0f0f0;
      cursor: pointer;
    }

    button:hover {
      background-color: #e0e0e0;
    }

    #log {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ddd;
      background-color: #fafafa;
    }

    #log div {
      margin-bottom: 5px;
    }
  </style>
  
</head>
<body>
  <h2>ðŸ“šClassroom</h2>

  <button id="subscribeA">Subscribe Student A to Math</button>
  <button id="subscribeB">Subscribe Student B to Math</button>
  <button id="unsubscribeA">Unsubscribe Student A from Math</button>
  <button id="unsubscribeB">Unsubscribe Student B from Math</button>
  <button id="publishMath">Publish Math Topic</button>
  <button id="clearLog">Clear Log</button>

  <div id="log"></div>
  
  <script>
    class PubSub {
      constructor() {
        this.topics = {};
      }

      subscribe(topic, listener) {
        if (!this.topics[topic]) {
          this.topics[topic] = [];
        }
        if (!this.topics[topic].includes(listener)) {
        this.topics[topic].push(listener);
        }
      }

      publish(topic, data) {
        if (!this.topics[topic]) return;
        this.topics[topic].forEach(listener => listener(data));
      }

      unsubscribe(topic, listener) {
        if (!this.topics[topic]) return;
        this.topics[topic] = this.topics[topic].filter(l => l !== listener);
        log(`âŒ A student was unsubscribe from "${topic}"`);
      }
    }

    const pubsub = new PubSub();

    function log(message) {
      const logDiv = document.getElementById('log');
      const entry = document.createElement('div');
      entry.textContent = message;
      logDiv.appendChild(entry);
    }

    function studentA(data) {
      log(`ðŸ‘©â€ðŸŽ“ Student A received math update: ${data}`);
    }

    function studentB(data) {
      log(`ðŸ‘¨â€ðŸŽ“ Student B received math update: ${data}`);
    }

    document.getElementById('subscribeA').addEventListener('click', () => {
      pubsub.subscribe("math", studentA);
      log("âœ… Student A subscribed to Math");
    });

    document.getElementById('subscribeB').addEventListener('click', () => {
      pubsub.subscribe("math", studentB);
      log("âœ… Student B subscribed to Math");
    });

    document.getElementById('unsubscribeA').addEventListener('click', () => {
      pubsub.unsubscribe("math", studentA);
    });

    document.getElementById('unsubscribeB').addEventListener('click', () => {
      pubsub.unsubscribe("math", studentB);
    });

    document.getElementById('publishMath').addEventListener('click', () => {
      pubsub.publish("math", "New assignment: Algebra worksheet due Friday");
      log("ðŸ“¢ Teacher published Math topic");
    });

    document.getElementById('clearLog').addEventListener('click', () => {
      document.getElementById('log').innerHTML = "";
    });
  </script>
</body>
</html>


